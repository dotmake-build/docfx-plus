<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>MAUI-gRPC Examples </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="MAUI-gRPC Examples ">
      
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="../../../toc.html">
      <meta name="docfx:tocrel" content="../../toc.html">
      
      <meta name="docfx:rel" content="../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/StephenHidem/AntPlus/blob/main/Documentation/docfx/docs/examples/maui-grpc/mauiexampleoverview.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">


      <script type="module" src="./../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../.././">
            <img id="logo" class="svg" src="../../../images/Help.png" alt="Small Earth Technology ANT+ Class Library">
            Small Earth Technology ANT+ Class Library
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="maui-grpc-examples">MAUI-gRPC Examples</h1>

<p>These examples consists of four projects. AntGrpcShared is a class library providing a gRPC client/server to be consumed by the other			projects. AntGrpcService is a Windows service that provides services to connect to and communicate with an ANT USB stick.			The MauiAntClientApp is a .NET MAUI project and gRPC client that is used to demonstrate Windows/Android applications that work with the			remote server application on a local subnet. <strong>I have not tested the other platforms supported by .NET MAUI.</strong></p>
<div class="NOTE">
<h5>Note</h5>
<p><strong>About gRPC</strong></p>
<p>gRPC is a Google defined protocol for remote procedure calls. It is the recommended RPC to use instead of WCF. Also,				don't confuse <strong>gRPC channels</strong> with <strong>ANT radio channels</strong>. gRPC is a				network protocol, ANT radio channels are a Dynastream/Garmin protocol for ANT radios.</p>
</div>
<p>The intent of AntGrpcService is to make the ANT USB stick accessible not only to client applications running on the local			host but mobile device emulators and mobile devices connected to the network the service is running on.</p>
<p>AntGrpcShared is the glue that facilitates communication between clients and the service. The benefit of using			gRPC is that multiple clients can run simultaneously, both on the local PC and over the network.</p>
<h2 id="Section1"> The MAUI/gRPC Example Projects</h2>
<p>AntGrpcShared is the glue that facilitates communication between clients and the service. The benefit of using				gRPC is that multiple clients can run simultaneously, both on the local PC and over the network.</p>
<h3 id="SubSection1"> AntGrpcShared</h3>
<p>This class library is configured as a gRPC client/server library. The .proto files define the messages and data exchanged						between client and server implementations. Additional classes are generated by the gRPC tools to facilitate the communication.						AntGrpcShared.ClientServices namespace provides the client services to connect to the server.</p>
<h3 id="SubSection2"> AntGrpcService</h3>
<p>The server is a Windows service that runs on the host PC that has an ANT USB stick connected to it.						The server may also run as a console application. Three services are provided - DiscoveryService, AntRadioService, and AntChannelService.</p>
<p>The DiscoveryService replies to client messages over a UDP multicast port on the local subnet. This allows clients to obtain						the URI of the server and connect to the gRPC channel. Think of it as a poor man's service discovery protocol. No authentication						or validation is performed.</p>
<p>The AntRadioService provides methods to get information about the connected ANT USB stick, initialize for continuous scan mode,						and get channels to communicate with ANT devices via the AntChannelService.</p>
<p>The AntChannelService has a method to subscribe to a gRPC stream of ANT messages when the ANT USB stick has been initialized						for continuous scan mode. The remaining gRPC/ANT radio channels are used to send extended acknowledged messages to individual						ANT devices.</p>
<p><strong>The service can be debugged!</strong> Make sure the service is not installed or disable it in the						service controller (<strong>services.msc</strong>). Select the Debug solution configuration and launch it						from Visual Studio. A console window will open. Logging output is displayed in the console window and breakpoints						can be set.</p>
<h3 id="SubSection3"> MauiAntClientApp</h3>
<p>The client app is the consumer of the client services provided by AntGrpcShared project. The server URI is first obtained via						a UDP multicast message, a gRPC connection to the server is established, and then requests to initialize and communicate with the						remote ANT USB stick are invoked.</p>
<h3 id="SubSection4"> AntGrpcServicePackage</h3>
<p>The AntGrpcServicePackage installs the AntGrpcService on the local Windows PC and creates a firewall exception allowing network						traffic between the service and any clients on the network. Wix is used to create the MSI file. You must install the						Wix toolset to build this project.</p>
<h2 id="Section2"> How It Works</h2>
<p>UDP multicast is used for service discovery and HTTP is used for communication between client and server. The multicast discovery				service is invoked first to obtain the server URI, then the server gRPC channel is established				to the server IP address obtained from the reply to the UDP message. I'm assuming the server and client app are on the				same local subnet.</p>
<p>The UDP multicast endpoint is 239.55.43.6:55437. This is an arbitrary assignment in the multicast address range. You are certainly				welcome to select your own address and port. The message sent/received is not relevant in this example, we're just interested in				the server IP address in the received message. This is used in the next step to form the URI to connect to the gRPC server channel.</p>
<p>The client then connects to the gRPC service. The URI is constructed from the server IP address and the arbitrary port number				created when the AntGrpcService project was created. The AntGrpcService launchSettings.json file has the port number. Two protocols				are defined in launchSettings.json; I'm using the HTTP protocol and port number. Once the client is connected to the server the client initializes				continuous scan mode. The client then subscribes to streaming messages from ANT channel 0 and the client app is up and running.</p>
<h2 id="see-also">See Also</h2>
<h4 id="concepts">Concepts</h4>
<ul>
<li><a href="antgrpcshared.html">AntGrpcShared</a></li>
<li><a href="antgrpcservice.html">AntGrpcService</a></li>
<li><a href="antgrpcservicepackage.html">AntGrpcServicePackage</a></li>
<li><a href="mauiantgrpcclient.html">MauiAntGrpcClient</a></li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/StephenHidem/AntPlus/blob/main/Documentation/docfx/docs/examples/maui-grpc/mauiexampleoverview.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Documentation built 12/05/2025 21:32:24.<br>&#169; 2022 Stephen Hidem.
        </div>
        <div class="flex-fill text-end">
          <span>Made with <a href="https://dotmake.build/docfx-plus/">docfx-plus</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
